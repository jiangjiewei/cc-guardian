#!/usr/bin/env python
#coding=utf-8
'''
将生成的均值文件转换为npy的形式
'''

import PIL
import Image
import sys
import time
import os
import numpy as np
from matplotlib import pyplot as plt 

start = time.time()

# Make sure that caffe is on the python path
caffe_root = '/home/jie/caffe/caffe-master/'  
sys.path.insert(0, caffe_root + 'python')

import caffe

#source = caffe_root + 'myself/python_okornotok/okornotok_result/mnist_test_lmdb_mean.binaryproto'
#des = caffe_root + 'myself/python_okornotok/okornotok_result/mnist_test_lmdb_mean.npy'

source = caffe_root + 'myself/mnist_train_lmdb_mean.binaryproto'
des = caffe_root + 'myself/mnist_train_lmdb_mean.npy'

blob = caffe.proto.caffe_pb2.BlobProto()
data = open( source , 'rb' ).read()
blob.ParseFromString(data)
arr = np.array( caffe.io.blobproto_to_array(blob) )
out = arr[0]
np.save( des , out )
